!function(){"use strict";const e=document.querySelector("#profile-edit-button"),t=document.querySelector("#profile-add-button"),s=document.querySelector("#profile-image-button"),r=document.querySelector("#input-name"),i=document.querySelector("#input-description"),n=".cards__list",o="#modal-edit",a="#modal-add",l="#modal-confirm",u="#modal-profile-image",d="#modal-image",h="profile-form",c="add-form",_="profile-image-form",m=".profile__title",p=".profile__paragraph",E=".profile__image",v="#card-template";class b{constructor(e,t,s,r,i){this._name=e.name,this._link=e.link,this.id=e._id,this.cardData=e.cardData,this.isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=s,this._handleLikeClick=r,this._handleDeleteSubmit=i}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteSubmit(this.id,this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_renderLikes(){this.isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}updateLikes(e){this.isLiked=e,this._renderLikes()}removeCard(){this._cardElement.remove(),this._cardElement=null}generateCard(){return this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._setEventListeners(),this._renderLikes(),this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardElement}}class L{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_disableButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}_enableButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_hasInvalidInput(){return!this._inputList.every((e=>e.validity.valid))}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState(this._inputList,this._buttonElement)}))}))}resetFormValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._disableButton()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class f{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class S{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose(e){e.preventDefault(),"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close-button"))&&this.close()}))}}class C extends S{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}reset(){this._popupForm.reset()}setLoading(e,t){this._submitButton.textContent=e?t:this._submitButtonText}}const g=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(e,t).then(this._checkResponse)}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers})}getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers})}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}createNewCard(e){return this._request(`${this._baseUrl}/cards`,{method:"POST",body:JSON.stringify(e),headers:this._headers})}deleteCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}likeCard(e){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers})}dislikeCard(e){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers})}updateUserInfo(e){let{name:t,about:s}=e;return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",body:JSON.stringify({name:t,about:s}),headers:this._headers})}updateAvatar(e){return this._request(`${this._baseUrl}/users/me/avatar/`,{method:"PATCH",body:JSON.stringify({avatar:e}),headers:this._headers})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"9aa267fe-3315-41ab-a072-2d6dbd5ca77b","Content-Type":"application/json"}});let k;g.getAppInfo().then((e=>{let[t,s]=e;q.setUserInfo(s.name,s.about),q.setAvatar(s.avatar),k=new f({items:t.reverse(),renderer:e=>{const t=$(e);k.addItem(t)}},n),k.renderItems()})).catch(console.error);const y={},I=new class extends S{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector(".modal__image"),this._previewTitle=this._popupElement.querySelector("#modal-preview")}open(e){this._previewTitle.textContent=e.name,this._previewImage.src=e.link,this._previewImage.alt=e.name,super.open()}}(d),q=new class{constructor(e,t,s){this._userNameElement=document.querySelector(e),this._userDescriptionElement=document.querySelector(t),this._avatarElement=document.querySelector(s)}getUserInfo(){return{name:this._userNameElement.textContent,about:this._userDescriptionElement.textContent}}setUserInfo(e,t){this._userNameElement.textContent=e,this._userDescriptionElement.textContent=t}setAvatar(e){this._avatarElement.src=e}}(m,p,E),B=new class extends S{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}setSubmitAction(e){this._handleFormSubmit=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}setLoading(e){this._submitButton.textContent=e?"Deleting...":this._submitButtonText}}(l),w=new C(a,(function(e){F((function(){return g.createNewCard(e).then((e=>{const t=$(e);k.addItem(t),w.reset()}))}),w,"Creating...")})),U=new C(o,(function(e){F((function(){return g.updateUserInfo(e).then((e=>{q.setUserInfo(e.name,e.about)}))}),U)})),x=new C(u,(function(e){F((function(){return g.updateAvatar(e.link).then((e=>{q.setAvatar(e.avatar),x.reset()}))}),x)}));function F(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving...";t.setLoading(!0,s),e().then((()=>{t.close()})).catch(console.error).finally((()=>{t.setLoading(!1)}))}function T(e){e.isLiked?g.dislikeCard(e.id).then((()=>{e.updateLikes()})).catch(console.error):g.likeCard(e.id).then((()=>{e.updateLikes(e.id)})).catch(console.error)}function A(e){I.open(e)}function D(e,t){B.open(),B.setSubmitAction((()=>{B.setLoading(!0),g.deleteCard(e).then((()=>{t.removeCard(),B.close()})).catch(console.error).finally((()=>{B.setLoading(!1)}))}))}function $(e){return new b(e,v,A,T,D).generateCard()}var V;s.addEventListener("click",(()=>{y[_].resetFormValidation(),x.open()})),e.addEventListener("click",(()=>{!function(){const{name:e,about:t}=q.getUserInfo();r.value=e,i.value=t}(),y[h].resetFormValidation(),U.open()})),t.addEventListener("click",(()=>{y[c].resetFormValidation(),w.open()})),x.setEventListeners(),w.setEventListeners(),U.setEventListeners(),B.setEventListeners(),I.setEventListeners(),V={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(V.formSelector)).forEach((e=>{const t=new L(V,e),s=e.getAttribute("name");s&&(y[s]=t,t.enableValidation())}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cEQxSCxTQUFTOUIsSUFDaEIsTUFBTTJKLEVBQVksSUFBSTdKLEVBQWN3SixFQUFRdEosR0FDdEM0SixFQUFXNUosRUFBWTZKLGFBQWEsUUFDdENELElBQ0ZqQyxFQUFlaUMsR0FBWUQsRUFDM0JBLEVBQVUxSCxtQkFDWixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuLy8gICB7XG4vLyAgICAgbmFtZTogXCJJY2UgY2FzdGxlc1wiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2OTUzNzgyMDE5MjktYzdlNjhhODEwMmJkP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTI4MjQmcT04MFwiLFxuLy8gICB9LFxuLy8gICB7XG4vLyAgICAgbmFtZTogXCJQaW5rIHdhbGxzXCIsXG4vLyAgICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTY5NjA3NTYxOTA5MS1kZWRhZTI1YjFmNjU/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MjgzMCZxPTgwXCIsXG4vLyAgIH0sXG4vLyAgIHtcbi8vICAgICBuYW1lOiBcIkhvdXNlIG9uIGEgdHJlZVwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NDczOTM0MjktMDk4ZGQxMjIwOTFhP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTMwODcmcT04MFwiLFxuLy8gICB9LFxuLy8gICB7XG4vLyAgICAgbmFtZTogXCJDaHVyY2ggb2YgSGFsbGdyaW11clwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2OTQ3NzQ0MzMwNzItZDZmMDc5NzllM2VlP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTMwODcmcT04MFwiLFxuLy8gICB9LFxuLy8gICB7XG4vLyAgICAgbmFtZTogXCJOaWdodCB0b3duXCIsXG4vLyAgICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTY5NTI0OTc0NzUzMC01NzQ2MGE4OGFkODA/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MzA4NyZxPTgwXCIsXG4vLyAgIH0sXG4vLyAgIHtcbi8vICAgICBuYW1lOiBcIkFudGVsb3BlIGNhbnlvblwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDU1MjEzNzc3NzQtMTAzYThjYzJmNzM1P2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTMwODcmcT04MFwiLFxuLy8gICB9LFxuLy8gXTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBjaGFuZ2VJbWFnZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtaW1hZ2UtYnV0dG9uXCJcbik7XG5cbmV4cG9ydCBjb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LW5hbWVcIik7XG5leHBvcnQgY29uc3QgaW5wdXREZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtZGVzY3JpcHRpb25cIik7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gIGNhcmRMaXN0OiBcIi5jYXJkc19fbGlzdFwiLFxuICBlZGl0Rm9ybVBvcHVwOiBcIiNtb2RhbC1lZGl0XCIsXG4gIGFkZEZvcm1Qb3B1cDogXCIjbW9kYWwtYWRkXCIsXG4gIGRlbGV0ZUNhcmRQb3B1cDogXCIjbW9kYWwtY29uZmlybVwiLFxuICBjaGFuZ2VJbWFnZVBvcHVwOiBcIiNtb2RhbC1wcm9maWxlLWltYWdlXCIsXG4gIHByZXZpZXdQb3B1cDogXCIjbW9kYWwtaW1hZ2VcIixcbiAgcHJvZmlsZUZvcm06IFwicHJvZmlsZS1mb3JtXCIsXG4gIGFkZEZvcm06IFwiYWRkLWZvcm1cIixcbiAgcHJvZmllbEltYWdlRm9ybTogXCJwcm9maWxlLWltYWdlLWZvcm1cIixcbiAgcHJvZmlsZVRpdGxlOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICBwcm9maWxlUGFyYWdyYXBoOiBcIi5wcm9maWxlX19wYXJhZ3JhcGhcIixcbiAgcHJvZmlsZUltYWdlOiBcIi5wcm9maWxlX19pbWFnZVwiLFxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZUxpa2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVTdWJtaXRcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuaWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLmNhcmREYXRhID0gZGF0YS5jYXJkRGF0YTtcbiAgICB0aGlzLmlzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XG5cbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZVN1Ym1pdCA9IGhhbmRsZURlbGV0ZVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVTdWJtaXQodGhpcy5pZCwgdGhpcyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX3JlbmRlckxpa2VzKCkge1xuICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUxpa2VzKGlzTGlrZWQpIHtcbiAgICB0aGlzLmlzTGlrZWQgPSBpc0xpa2VkO1xuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XG4gIH1cblxuICByZW1vdmVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XG5cbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcbiAgICBdO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICB9XG5cbiAgX2Rpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dExpc3QuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmVzZXRGb3JtVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gIH1cblxuICBzZXRMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQge1xuICBzZWxlY3RvcnMsXG4gIGNvbmZpZyxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIGFkZE5ld0NhcmRCdXR0b24sXG4gIGNoYW5nZUltYWdlQnV0dG9uLFxuICBpbnB1dE5hbWUsXG4gIGlucHV0RGVzY3JpcHRpb24sXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcblxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcblxuLy8gQVBJXG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjlhYTI2N2ZlLTMzMTUtNDFhYi1hMDcyLTJkNmRiZDVjYTc3YlwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmxldCBjYXJkU2VjdGlvbjtcblxuYXBpXG4gIC5nZXRBcHBJbmZvKClcbiAgLnRoZW4oKFtpbml0aWFsQ2FyZHMsIHVzZXJEYXRhXSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhLm5hbWUsIHVzZXJEYXRhLmFib3V0KTtcbiAgICB1c2VySW5mby5zZXRBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBpdGVtczogaW5pdGlhbENhcmRzLnJldmVyc2UoKSxcbiAgICAgICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2FyZCA9IHJlbmRlckNhcmQoZGF0YSk7XG4gICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBzZWxlY3RvcnMuY2FyZExpc3RcbiAgICApO1xuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKTtcblxuLy8gVmFsaWRhdGlvblxuXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuICAgIGlmIChmb3JtTmFtZSkge1xuICAgICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLy8gQ3JlYXRlIEluc3RhbmNlc1xuXG5jb25zdCBjYXJkUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy5wcmV2aWV3UG9wdXApO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcbiAgc2VsZWN0b3JzLnByb2ZpbGVUaXRsZSxcbiAgc2VsZWN0b3JzLnByb2ZpbGVQYXJhZ3JhcGgsXG4gIHNlbGVjdG9ycy5wcm9maWxlSW1hZ2Vcbik7XG5cbmNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtKHNlbGVjdG9ycy5kZWxldGVDYXJkUG9wdXApO1xuXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgc2VsZWN0b3JzLmFkZEZvcm1Qb3B1cCxcbiAgaGFuZGxlQWRkRm9ybVN1Ym1pdFxuKTtcblxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBzZWxlY3RvcnMuZWRpdEZvcm1Qb3B1cCxcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcbik7XG5cbmNvbnN0IHVwZGF0ZUF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHNlbGVjdG9ycy5jaGFuZ2VJbWFnZVBvcHVwLFxuICBoYW5kbGVBdmF0YXJGb3JtU3VibWl0XG4pO1xuXG4vLyBGdW5jdGlvbnNcblxuZnVuY3Rpb24gaGFuZGxlU3VibWl0KHJlcXVlc3QsIHBvcHVwSW5zdGFuY2UsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xuICBwb3B1cEluc3RhbmNlLnNldExvYWRpbmcodHJ1ZSwgbG9hZGluZ1RleHQpO1xuICByZXF1ZXN0KClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBwb3B1cEluc3RhbmNlLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cEluc3RhbmNlLnNldExvYWRpbmcoZmFsc2UpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCh1c2VyRGF0YSkge1xuICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gYXBpLnVwZGF0ZVVzZXJJbmZvKHVzZXJEYXRhKS50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuYWJvdXQpO1xuICAgIH0pO1xuICB9XG4gIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgcHJvZmlsZUVkaXRQb3B1cCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZEZvcm1TdWJtaXQoY2FyZERhdGEpIHtcbiAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIGFwaS5jcmVhdGVOZXdDYXJkKGNhcmREYXRhKS50aGVuKChyZXMpID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSByZW5kZXJDYXJkKHJlcyk7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xuICAgICAgYWRkQ2FyZFBvcHVwLnJlc2V0KCk7XG4gICAgfSk7XG4gIH1cbiAgaGFuZGxlU3VibWl0KG1ha2VSZXF1ZXN0LCBhZGRDYXJkUG9wdXAsIFwiQ3JlYXRpbmcuLi5cIik7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoZGF0YSkge1xuICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gYXBpLnVwZGF0ZUF2YXRhcihkYXRhLmxpbmspLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldEF2YXRhcih1c2VyLmF2YXRhcik7XG4gICAgICB1cGRhdGVBdmF0YXJQb3B1cC5yZXNldCgpO1xuICAgIH0pO1xuICB9XG4gIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgdXBkYXRlQXZhdGFyUG9wdXApO1xufVxuXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGlucHV0TmFtZS52YWx1ZSA9IG5hbWU7XG4gIGlucHV0RGVzY3JpcHRpb24udmFsdWUgPSBhYm91dDtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmQpIHtcbiAgaWYgKGNhcmQuaXNMaWtlZCkge1xuICAgIGFwaVxuICAgICAgLmRpc2xpa2VDYXJkKGNhcmQuaWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQudXBkYXRlTGlrZXMoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH0gZWxzZSB7XG4gICAgYXBpXG4gICAgICAubGlrZUNhcmQoY2FyZC5pZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC51cGRhdGVMaWtlcyhjYXJkLmlkKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhpbWFnZURhdGEpIHtcbiAgY2FyZFByZXZpZXdQb3B1cC5vcGVuKGltYWdlRGF0YSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUJ1dHRvbihjYXJkSUQsIGNhcmQpIHtcbiAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcbiAgZGVsZXRlQ2FyZFBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgZGVsZXRlQ2FyZFBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XG4gICAgYXBpXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkSUQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xuICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGRhdGEsXG4gICAgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSxcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZUxpa2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVCdXR0b25cbiAgKTtcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59XG5cbi8vIEV2ZW50IExpc3RlbmVyc1xuXG5jaGFuZ2VJbWFnZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1tzZWxlY3RvcnMucHJvZmllbEltYWdlRm9ybV0ucmVzZXRGb3JtVmFsaWRhdGlvbigpO1xuICB1cGRhdGVBdmF0YXJQb3B1cC5vcGVuKCk7XG59KTtcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XG4gIGZvcm1WYWxpZGF0b3JzW3NlbGVjdG9ycy5wcm9maWxlRm9ybV0ucmVzZXRGb3JtVmFsaWRhdGlvbigpO1xuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzW3NlbGVjdG9ycy5hZGRGb3JtXS5yZXNldEZvcm1WYWxpZGF0aW9uKCk7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcblxuLy8gSW5pdGlhbGl6ZSBpbnN0YW5jZXNcblxudXBkYXRlQXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xucHJvZmlsZUVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jYXJkUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICByZXR1cm4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgX3JlcXVlc3QodXJsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICBnZXRBcHBJbmZvKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRJbml0aWFsQ2FyZHMoKSwgdGhpcy5nZXRVc2VySW5mbygpXSk7XG4gIH1cblxuICBjcmVhdGVOZXdDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgZGlzbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFib3V0LFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlQXZhdGFyKGF2YXRhcikge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhci9gLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl9wcmV2aWV3VGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1wcmV2aWV3XCIpO1xuICB9XG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX3ByZXZpZXdUaXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJEZXNjcmlwdGlvblNlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3VzZXJOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB1c2VyRGVzY3JpcHRpb25TZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl91c2VyRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xuICAgIHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG5cbiAgc2V0QXZhdGFyKGF2YXRhcikge1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gIH1cblxuICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGFjdGlvbjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XG4gICAgfSk7XG4gIH1cblxuICBzZXRMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZE5ld0NhcmRCdXR0b24iLCJjaGFuZ2VJbWFnZUJ1dHRvbiIsImlucHV0TmFtZSIsImlucHV0RGVzY3JpcHRpb24iLCJzZWxlY3RvcnMiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZURlbGV0ZVN1Ym1pdCIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJpZCIsIl9pZCIsImNhcmREYXRhIiwiaXNMaWtlZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfaGFuZGxlRGVsZXRlU3VibWl0IiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVCdXR0b24iLCJfY2FyZEltYWdlIiwiX3JlbmRlckxpa2VzIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwidXBkYXRlTGlrZXMiLCJyZW1vdmVDYXJkIiwiX2NhcmRFbGVtZW50IiwiZ2VuZXJhdGVDYXJkIiwiX2NhcmRUaXRsZSIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWwiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2Rpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiZXZlcnkiLCJpbnB1dEVsIiwiZm9yRWFjaCIsImV2dCIsInJlc2V0Rm9ybVZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9zdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0Iiwic2V0TG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiX3JlcXVlc3QiLCJ1cmwiLCJvcHRpb25zIiwiZmV0Y2giLCJ0aGVuIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJnZXRBcHBJbmZvIiwiYWxsIiwiY3JlYXRlTmV3Q2FyZCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImxpa2VDYXJkIiwiZGlzbGlrZUNhcmQiLCJ1cGRhdGVVc2VySW5mbyIsIl9yZWYyIiwiYWJvdXQiLCJ1cGRhdGVBdmF0YXIiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwiY2FyZFNlY3Rpb24iLCJpbml0aWFsQ2FyZHMiLCJ1c2VyRGF0YSIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXIiLCJyZXZlcnNlIiwiY2FyZCIsInJlbmRlckNhcmQiLCJjYXRjaCIsImNvbnNvbGUiLCJlcnJvciIsImZvcm1WYWxpZGF0b3JzIiwiY2FyZFByZXZpZXdQb3B1cCIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld1RpdGxlIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJEZXNjcmlwdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWVFbGVtZW50IiwiX3VzZXJEZXNjcmlwdGlvbkVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsImRlbGV0ZUNhcmRQb3B1cCIsInNldFN1Ym1pdEFjdGlvbiIsImFjdGlvbiIsImFkZENhcmRQb3B1cCIsImhhbmRsZVN1Ym1pdCIsInByb2ZpbGVFZGl0UG9wdXAiLCJ1cGRhdGVBdmF0YXJQb3B1cCIsInVzZXIiLCJyZXF1ZXN0IiwicG9wdXBJbnN0YW5jZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImZpbmFsbHkiLCJpbWFnZURhdGEiLCJoYW5kbGVEZWxldGVCdXR0b24iLCJjYXJkSUQiLCJjb25maWciLCJmaWxsUHJvZmlsZUZvcm0iLCJmb3JtU2VsZWN0b3IiLCJBcnJheSIsImZyb20iLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=